<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `http_signatures` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, http_signatures">

    <title>http_signatures - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc mod">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <div class="sidebar-menu">&#9776;</div>
        
        <p class='location'>Crate http_signatures</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'http_signatures', ty: 'mod', relpath: '../'};</script></div>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Crate <a class="mod" href=''>http_signatures</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/http_signatures/lib.rs.html#16-368' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>HTTP Signatures, an implementation of <a href="https://tools.ietf.org/html/draft-cavage-http-signatures-09">the http signatures specification</a></p>

<p>The base crate provides types for creating and verifying signatures, and the features
<code>use_hyper</code>, <code>use_reqwest</code>, and <code>use_rocket</code> provide implementations of required traits for
easily using HTTP Signatures with web applications.</p>

<h1 id='creating-an-http-signature' class='section-header'><a href='#creating-an-http-signature'>Creating an HTTP Signature</a></h1>
<p>To get a string that would be the contents of an HTTP Request&#39;s Authorization header, a few
steps must be taken. The method, path, and query must be known, furthermore, there must be at
least one item in the headers hashmap, if there is not, the HTTP Signature creation will fail.</p>

<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">http_signatures</span>::{<span class="ident">HttpSignature</span>, <span class="ident">SignatureAlgorithm</span>, <span class="ident">ShaSize</span>};
<span class="kw">use</span> <span class="ident">http_signatures</span>::<span class="ident">REQUEST_TARGET</span>;

<span class="kw">let</span> <span class="ident">method</span> <span class="op">=</span> <span class="string">&quot;GET&quot;</span>;
<span class="kw">let</span> <span class="ident">path</span> <span class="op">=</span> <span class="string">&quot;/test&quot;</span>;
<span class="kw">let</span> <span class="ident">query</span> <span class="op">=</span> <span class="string">&quot;key=value&quot;</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">headers</span>: <span class="ident">BTreeMap</span><span class="op">&lt;</span><span class="ident">String</span>, <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;&gt;</span> <span class="op">=</span> <span class="ident">BTreeMap</span>::<span class="ident">new</span>();
<span class="ident">headers</span>.<span class="ident">insert</span>(<span class="string">&quot;Accept&quot;</span>.<span class="ident">into</span>(), <span class="macro">vec</span><span class="macro">!</span>[<span class="string">&quot;application/json&quot;</span>.<span class="ident">into</span>()]);
<span class="ident">headers</span>.<span class="ident">insert</span>(
    <span class="ident">REQUEST_TARGET</span>.<span class="ident">into</span>(),
    <span class="macro">vec</span><span class="macro">!</span>[<span class="macro">format</span><span class="macro">!</span>(<span class="string">&quot;{} {}?{}&quot;</span>, <span class="ident">method</span>.<span class="ident">to_lowercase</span>(), <span class="ident">path</span>, <span class="ident">query</span>)],
);

<span class="kw">let</span> <span class="ident">algorithm</span> <span class="op">=</span> <span class="ident">SignatureAlgorithm</span>::<span class="ident">RSA</span>(<span class="ident">ShaSize</span>::<span class="ident">FiveTwelve</span>);
<span class="kw">let</span> <span class="ident">key_id</span> <span class="op">=</span> <span class="string">&quot;1&quot;</span>.<span class="ident">into</span>();

<span class="kw">let</span> <span class="ident">auth_header</span> <span class="op">=</span> <span class="ident">HttpSignature</span>::<span class="ident">new</span>(<span class="ident">key_id</span>, <span class="ident">priv_key</span>, <span class="ident">algorithm</span>, <span class="ident">headers</span>)<span class="question-mark">?</span>
    .<span class="ident">authorization_header</span>()<span class="question-mark">?</span>;

<span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Authorization: {}&quot;</span>, <span class="ident">auth_header</span>);</pre>

<h1 id='verifying-an-http-signature' class='section-header'><a href='#verifying-an-http-signature'>Verifying an HTTP Signature</a></h1>
<p>To verify a header, one must implement a type called <code>GetKey</code>. This type is imporant because it
contains the information required to convert a key id, represented as &amp;str, into a Key. This
can be done by accessing some external state, or by storing the required state in the struct
that implements <code>GetKey</code>.</p>

<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">http_signatures</span>::<span class="ident">prelude</span>::<span class="kw-2">*</span>;
<span class="kw">use</span> <span class="ident">http_signatures</span>::<span class="ident">SignedHeader</span>;

<span class="kw">struct</span> <span class="ident">MyKeyGetter</span>;

<span class="kw">impl</span> <span class="ident">GetKey</span> <span class="kw">for</span> <span class="ident">MyKeyGetter</span> {
    <span class="kw">type</span> <span class="ident">Key</span> <span class="op">=</span> <span class="ident">File</span>;
    <span class="kw">type</span> <span class="ident">Error</span> <span class="op">=</span> <span class="ident">Error</span>;

    <span class="kw">fn</span> <span class="ident">get_key</span>(<span class="self">self</span>, <span class="ident">_key_id</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="self">Self</span>::<span class="ident">Key</span>, <span class="self">Self</span>::<span class="ident">Error</span><span class="op">&gt;</span> {
        <span class="ident">File</span>::<span class="ident">open</span>(<span class="string">&quot;tests/assets/public.der&quot;</span>).<span class="ident">map_err</span>(<span class="ident">Error</span>::<span class="ident">from</span>)
    }
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">headers</span> <span class="op">=</span> <span class="ident">Vec</span>::<span class="ident">new</span>();
<span class="ident">headers</span>.<span class="ident">push</span>((<span class="string">&quot;Accept&quot;</span>.<span class="ident">into</span>(), <span class="string">&quot;application/json&quot;</span>.<span class="ident">into</span>()));

<span class="kw">let</span> <span class="ident">method</span> <span class="op">=</span> <span class="string">&quot;GET&quot;</span>;
<span class="kw">let</span> <span class="ident">path</span> <span class="op">=</span> <span class="string">&quot;/test&quot;</span>;
<span class="kw">let</span> <span class="ident">query</span> <span class="op">=</span> <span class="string">&quot;key=value&quot;</span>;

<span class="kw">let</span> <span class="ident">key_getter</span> <span class="op">=</span> <span class="ident">MyKeyGetter</span>;

<span class="kw">let</span> <span class="ident">auth_header</span> <span class="op">=</span> <span class="ident">SignedHeader</span>::<span class="ident">new</span>(<span class="kw-2">&amp;</span><span class="ident">auth_header</span>)<span class="question-mark">?</span>;
<span class="ident">auth_header</span>
    .<span class="ident">verify</span>(<span class="kw-2">&amp;</span><span class="ident">headers</span>, <span class="ident">method</span>, <span class="ident">path</span>, <span class="prelude-val">Some</span>(<span class="ident">query</span>), <span class="ident">key_getter</span>)<span class="question-mark">?</span>;
</pre>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="mod" href="prelude/index.html"
                                  title='mod http_signatures::prelude'>prelude</a></td>
                           <td class='docblock-short'>
                                <p>This module defines useful traits for using HTTP Signatures.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="use_hyper_client/index.html"
                                  title='mod http_signatures::use_hyper_client'>use_hyper_client</a></td>
                           <td class='docblock-short'>
                                <p>Available with the <code>use_hyper</code> feature. This modulde defines the <code>AsHttpSignature</code> and
<code>WithHttpSignature</code> traits for <code>hyper::Request</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="use_hyper_server/index.html"
                                  title='mod http_signatures::use_hyper_server'>use_hyper_server</a></td>
                           <td class='docblock-short'>
                                <p>Available with the <code>use_hyper</code> feature. This module defines <code>VerifyHeader</code> for
<code>hyper::server::Request</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="use_reqwest/index.html"
                                  title='mod http_signatures::use_reqwest'>use_reqwest</a></td>
                           <td class='docblock-short'>
                                <p>Available with the <code>use_reqwest</code> feature. This module defines <code>AsHttpSignature</code> and
<code>WithHttpSignature</code> for <code>reqwest::Request</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="mod" href="use_rocket/index.html"
                                  title='mod http_signatures::use_rocket'>use_rocket</a></td>
                           <td class='docblock-short'>
                                <p>Available with the <code>use_rocket</code> feature. This module defines <code>VerifyHeader</code> for
<code>rocket::Request</code>.</p>
                           </td>
                       </tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.HttpSignature.html"
                                  title='struct http_signatures::HttpSignature'>HttpSignature</a></td>
                           <td class='docblock-short'>
                                <p>The <code>HttpSignature</code> struct, this is the entry point for creating Authorization or Signature
headers. It contains all the values required for generation.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.SignedHeader.html"
                                  title='struct http_signatures::SignedHeader'>SignedHeader</a></td>
                           <td class='docblock-short'>
                                <p>The <code>SignedHeader</code> struct is the direct reasult of reading in the Authorization or Signature
header from a given request.</p>
                           </td>
                       </tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="enum" href="enum.Error.html"
                                  title='enum http_signatures::Error'>Error</a></td>
                           <td class='docblock-short'>
                                <p>The root Error</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="enum" href="enum.ShaSize.html"
                                  title='enum http_signatures::ShaSize'>ShaSize</a></td>
                           <td class='docblock-short'>
                                <p>Variations of the Sha hashing function.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="enum" href="enum.SignatureAlgorithm.html"
                                  title='enum http_signatures::SignatureAlgorithm'>SignatureAlgorithm</a></td>
                           <td class='docblock-short'>
                                <p>Which algorithm should be used to create an HTTP header.</p>
                           </td>
                       </tr></table><h2 id='constants' class='section-header'><a href="#constants">Constants</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="constant" href="constant.REQUEST_TARGET.html"
                                  title='constant http_signatures::REQUEST_TARGET'>REQUEST_TARGET</a></td>
                           <td class='docblock-short'>
                                
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "http_signatures";
    </script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>